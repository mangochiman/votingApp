<script type="text/javascript">
  function resetTable(){
    window.location = location.href;
  }

  function cancelEvent(){
    window.location = '/voter';
  }

  function selectParticipant(obj){
    var $btn = $(obj)
    $item = $btn.closest('tr');
    $otherTable = $('.participants').not( $btn.closest('tbody'));
    $item.fadeOut(function(){
      $btn.find('span').toggleClass('fa-angle-double-right fa-angle-double-left')
      $otherTable.append($item);
      $item.fadeIn()
    });       
  }

  function createFormElements(){
    spanElements = $('.my_votes').find("span");
    for (var i=0; i <= spanElements.length - 1; i++){
      userid = spanElements[i].getAttribute("userid");
      console.log(userid);
    }
  }
  
</script>


<div class="row">
  <div class="col-lg-12">
    <h1 class="page-header">Predictions - <%= @competition.name %></h1>
  </div>
</div>

<div class="row">
  <div class="col-lg-6">
    <div class="panel panel-default">
      <div class="panel-heading">
        Participants (<%= @tournament_participants.count %>)
      </div>
      <!-- /.panel-heading -->
      <div class="panel-body">
        <div class="table-responsive">
          <table class="table table-striped table-bordered table-hover">
            <thead>
              <tr>
                <th>Phone #</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>NickName</th>
                <th style="text-align: center;">Action</th>
              </tr>
            </thead>
            <tbody class="participants">
              <% @tournament_participants.each do |participant| %>
                <tr>
                  <td><%= participant.phone_number %></td>
                  <td><%= participant.first_name %></td>
                  <td><%= participant.last_name %></td>
                  <td><%= participant.nick_name %></td>
                  <td onmousedown="selectParticipant(this);" style="text-align: center; cursor: pointer;"><span userid="<%= participant.user_id %>" class="fa fa-angle-double-right"></span></td>

                </tr>
              <% end %>

            </tbody>
          </table>
        </div>

      </div>
      <!-- /.panel-body -->
    </div>
    <!-- /.panel -->
  </div>
  <!-- /.col-lg-6 -->
  <div class="col-lg-6">
    <div class="panel panel-default">
      <div class="panel-heading">
        My Predictions
      </div>
      <!-- /.panel-heading -->
      <div class="panel-body">
        <div class="table-responsive">
          <table class="table table-striped table-bordered table-hover">
            <thead>
              <tr>
                <th>Phone #</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>NickName</th>
                <th style="text-align: center;">Action</th>
              </tr>
            </thead>
            <tbody class="participants my_votes">

            </tbody>
          </table>
        </div>
        <!-- /.table-responsive -->
      </div>
      <!-- /.panel-body -->
    </div>
    <!-- /.panel -->
  </div>
  <!-- /.col-lg-6 -->
</div>
<button class="btn btn-primary" type="submit">Submit Button</button>
<button class="btn btn-warning" onclick="resetTable()" >Reset Button</button>
<button onclick="cancelEvent();" class="btn btn-danger" type="reset">Cancel Button</button>